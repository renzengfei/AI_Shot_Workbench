# 镜头卡片交互升级需求文档

## 1. 背景与目标
本项目旨在优化 `AI_Shot_Workbench` 中“人工改写页面”（Step 3: Deconstruction Review）的用户体验。
目前的镜头卡片列表过长，且单张卡片承载的信息密度较高。为了提高审核与改写效率，需要对列表进行分页处理，并重构镜头卡片布局，使其支持更丰富的视觉对比和更便捷的图片选择交互。

## 2. 核心功能需求

### 2.1 镜头列表分页
*   **现状**：所有镜头卡片在一个页面垂直堆叠显示。
*   **需求**：
    *   将镜头卡片列表改为**按页显示**。
    *   **每页显示 5 个**镜头卡片。
    *   页面底部和顶部提供分页控件（上一页、下一页、页码跳转）。
    *   切换分页时，页面应滚动到列表顶部。

### 2.2 超宽横向滚动布局
*   **现状**：内容挤在一个屏幕宽度内，垂直堆叠。
*   **需求**：
    *   **无限横向延伸**：取消“双屏”限制，卡片宽度根据内容（主要是图片数量）**自动向右延伸**。
    *   **连续横向滑动**：用户可以通过 Mac 触摸板（或 Shift+滚轮）流畅地左右滑动查看完整内容。
    *   **左侧冻结（Sticky）**：为了保证在浏览右侧大量图片时仍能看到预览效果，**左侧的核心预览区域应固定（Sticky）在视口左侧**。

## 3. 详细界面与交互设计

布局逻辑上分为 **“左侧固定预览区”** 和 **“右侧横向素材流”**。

### 3.1 左侧固定预览区 (Sticky Left Panel)
**定位**：始终可见的核心操作与反馈区。
**布局行为**：设置 `position: sticky; left: 0;`，层级高于右侧滚动内容。当用户向右滑动查看图片列表时，此区域吸附在左边缘不动。
**包含元素**（横向排列，同一行）：
1.  **原片分镜头视频**：展示当前分镜的原片视频片段（固定参照，不变）。
2.  **选中的生成图片**：展示当前被选定的 AI 生成图片，点击右侧素材后动态更新。
3.  **生成视频预览**：展示当前被选定的生成视频，点击右侧素材后动态更新。
4.  **首帧描述 & 视频描述**：文本区域，紧跟在预览区右侧。

### 3.2 流切换器与横向素材流 (Stream Switcher & Asset Flow)
**定位**：向右无限延伸的素材库，支持**图片/视频流切换**。
**布局结构**：
1.  **流类型切换器 (Stream Switcher)**：位于**首帧/视频描述右侧**，与其他元素在同一行。
    *   **布局**：竖向排列的按钮（上下堆叠）。
    *   **按钮 1**：**[图片]** —— 点击显示生成的图片列表（默认激活）。
    *   **按钮 2**：**[视频]** —— 点击显示生成的视频列表。
    *   **状态**：高亮当前激活的流类型（如 `[图片]*`）。
2.  **横向素材列表**：紧跟在流切换器右侧，向右无限延伸。
    *   根据切换器的状态，显示对应的图片列表或视频列表。
    *   **内容横向一字排开**，支持横向滚动。

**包含元素与行为**：
1.  **生成的图片流（默认显示）**：
    *   **布局**：单行横向排列（大图）。
    *   **排序**：序号从大到小（最新生成的在最左侧）。
    *   **交互**：每张图片下方有“选择”按钮，点击后更新左侧预览区的“选中的生成图片”。
2.  **生成的视频流（切换后显示）**：
    *   **布局**：单行横向排列（视频卡片）。
    *   **交互**：点击视频卡片或其“选择”按钮，在左侧预览区的“生成视频占位”中播放。

**优点**：
*   节省纵向空间，避免卡片过高。
*   分类清晰，用户专注于当前处理的媒体类型。

### 3.3 (已合并至 3.2)
*原计划的纵向分层布局已废弃，改为上述的 Tab 切换模式。*

## 4. 交互逻辑细节

*   **滑动体验**：
    *   放弃强制的 Scroll Snap（翻页感），改为**自由连续滚动 (Free Scroll)**，类似视频剪辑时间轴的体验。
*   **视觉层级**：
    *   左侧 Sticky 区域应有轻微的阴影或分隔线，以区分右侧滑入底部的图片内容。

*   **响应式适配**：虽然设计针对“两屏幕宽度”，但在不同分辨率下应保持比例协调，确保左右两屏内容在各自视口内完整可见。

## 6. UI 线框图 (Wireframe)

```
+--------------------------------------------------------------------------------------------------------------------------------------+
|  页面容器（垂直滚动分页，每页5个卡片）                                                                                                 |
+--------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                                      |
|  +--------------------------------------------------------------------------------------------------------------------------------+  |
|  |  镜头卡片（单行横向布局，overflow-x: auto，不换行）                                                                              |  |
|  |                                                                                                                                |  |
|  |  +--------------+ +--------------+ +--------------+ +----------------+ +--------+ +------+ +------+ +------+ +------+ ...      |  |
|  |  | 原片分镜视频 | | 选中生成图   | | 生成视频预览 | | 首帧/视频描述  | |[图片]*|| | 素材1| | 素材2| | 素材3| | 素材4|          |  |
|  |  | (固定参照)   | | (动态更新)   | | (动态更新)   | | (文本区域)     | |--------| |14:05 | |14:03 | |14:01 | |13:58 |          |  |
|  |  | (sticky)     | |              | |              | |                | |[视频] || |[选择]| |[选择]| |[选择]| |[选择]|          |  |
|  |  +--------------+ +--------------+ +--------------+ +----------------+ +--------+ +------+ +------+ +------+ +------+          |  |
|  |        ↑                                                                   ↑        <--- 横向无限滚动 --->                      |  |
|  |   粘性固定在左侧                                                      流切换器                                                  |  |
|  |                                                                      (竖向Tab)                                                  |  |
|  +--------------------------------------------------------------------------------------------------------------------------------+  |
|                                                                                                                                      |
|  +--------------------------------------------------------------------------------------------------------------------------------+  |
|  |  镜头卡片 2 ...                                                                                                                 |  |
|  +--------------------------------------------------------------------------------------------------------------------------------+  |
|                                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------+

说明：
- 所有元素横向一行排列，不换行
- 原片分镜视频：sticky 定位，始终固定在卡片最左侧可见
- 选中生成图 / 生成视频预览：点击右侧素材后更新
- 首帧/视频描述：文本区域，紧跟在预览区右侧
- 流切换器（图片/视频）：位于首帧/视频描述右侧，竖向排列（[图片] 在上，[视频] 在下）
- 素材列表：横向无限滚动，按序号从大到小（最新在左）排列
- 素材卡片右上角：显示生成完成时间（如 "14:05" 或 "2分钟前"）
```

## 5. 技术实现建议 (仅供参考)

*   **布局结构**：
    ```html
    <!-- Card Container: Flex + Overflow-x -->
    <div class="relative w-full flex overflow-x-auto no-scrollbar items-start">
    
        <!-- 1. Sticky Left Panel -->
        <div class="sticky left-0 z-20 flex-shrink-0 w-[300px] p-4 bg-glass backdrop-blur-xl border-r border-white/10">
            <!-- Preview Content -->
        </div>

        <!-- 2. Stream Switcher (Also Sticky, next to Left Panel) -->
        <div class="sticky left-[300px] z-20 flex-shrink-0 w-12 flex flex-col gap-4 py-6 items-center bg-glass-dark border-r border-white/10">
             <button>IMG</button>
             <button>VID</button>
        </div>

        <!-- 3. Scrollable Asset Flow -->
        <div class="flex-1 flex gap-4 p-4 min-w-0">
             <!-- Image/Video Cards Horizontal List -->
             <div class="w-[200px] flex-shrink-0">...</div>
             <div class="w-[200px] flex-shrink-0">...</div>
             <div class="w-[200px] flex-shrink-0">...</div>
             <!-- ... -->
        </div>
        
    </div>
    ```
*   **分页状态**：在 `Step3_DeconstructionReview` 组件中引入 `currentPage` state，利用 `slice` 方法截取 `round2Data.shots` 进行渲染。
